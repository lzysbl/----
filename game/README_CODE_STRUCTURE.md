# 艾诺迪亚风格RPG游戏

## 代码结构重组完成

代码已经重新组织成以下模块化文件夹结构：

```
game/
├── core/                    # 核心游戏逻辑
│   ├── __init__.py
│   ├── game_enhanced.py     # 主游戏类和游戏循环
│   ├── game_state.py        # 游戏状态管理
│   └── battle.py           # 战斗系统
├── entities/               # 游戏实体
│   ├── __init__.py
│   ├── player.py           # 玩家类
│   ├── enemy.py            # 敌人类
│   ├── enemy_spawner.py    # 敌人生成器
│   └── item.py             # 物品类
├── systems/                # 游戏系统
│   ├── __init__.py
│   ├── equipment.py        # 装备系统
│   ├── inventory.py        # 背包系统
│   ├── skill_system.py     # 技能系统
│   └── save_system.py      # 存档系统
├── ui/                     # 用户界面
│   ├── __init__.py
│   ├── hud.py              # HUD界面
│   └── font_manager.py     # 字体管理
├── utils/                  # 工具模块
│   ├── __init__.py
│   └── map.py              # 地图系统
├── tests/                  # 测试文件
│   ├── __init__.py
│   ├── test_*.py           # 各种测试文件
│   └── ...
├── launcher.py             # 游戏启动器
└── README_CODE_STRUCTURE.md # 本文档
```

## 启动游戏

```bash
cd game
python launcher.py
```

## 游戏功能

### 1. 增强版游戏（推荐）
- 完整的RPG功能
- 菜单系统
- 存档功能
- 装备系统
- 背包系统
- 技能系统

### 2. 各种测试模式
- 按键测试
- 墙体碰撞测试
- 敌人行为测试
- 装备系统测试
- 背包功能测试
- 等等...

## 主要改进

### 1. 代码组织
- ✅ 按功能模块分文件夹
- ✅ 清晰的导入结构
- ✅ 便于维护和扩展

### 2. 功能完善
- ✅ 安全的物品生成（不会卡在墙里）
- ✅ 血瓶堆叠功能
- ✅ 装备图标显示
- ✅ 背包选择逻辑优化
- ✅ 装备不重叠功能
- ✅ 鼠标点击选中功能

### 3. 性能优化
- ✅ 智能容量检查
- ✅ 显示层与数据层分离
- ✅ 高效的物品查找算法

## 技术特点

### 架构模式
- **MVC架构**：分离数据、逻辑和界面
- **模块化设计**：每个模块负责特定功能
- **事件驱动**：响应式的用户交互

### 核心技术
- **Python + Pygame**：游戏开发框架
- **面向对象编程**：清晰的类结构
- **模块化导入**：便于维护的导入系统

## 开发指南

### 添加新功能
1. 确定功能属于哪个模块
2. 在相应文件夹中添加代码
3. 更新导入语句
4. 添加测试用例

### 文件夹职责
- `core/`：游戏核心逻辑，主循环
- `entities/`：游戏中的对象实体
- `systems/`：游戏功能系统
- `ui/`：用户界面相关
- `utils/`：通用工具函数
- `tests/`：测试和演示代码

## 测试验证

运行结构测试：
```bash
python test_reorganized_structure.py
```

该脚本会验证：
- 所有模块导入正常
- 对象创建成功
- 系统功能正常

## 注意事项

1. **导入路径**：使用绝对导入而非相对导入
2. **Python路径**：每个模块都会自动添加正确的路径
3. **兼容性**：保持与原有功能的完全兼容

## 版本信息

- **重组日期**：2025年7月18日
- **Python版本**：3.12.7
- **Pygame版本**：2.6.1
- **状态**：✅ 代码重组完成，所有功能正常
